<!DOCTYPE html>
<html lang="en">
<head>
    <div>
        <h1> Add xml config </h1>
        <meta http-equiv="content-type" charset="utf-8">

        <link rel="stylesheet" type="text/css" href="style.css">
    </div>
</head>

<body>

<form id="fromNameToMo">
    <p>Name of config file
        <br>
        <input type="text" name="nameFile" value="" pattern="^[a-zA-Z]+$" title="Only letter" spellcheck="false" style="width:50%" autofocus required placeholder="With out .xml. Only letters and numbers">
        <meta http-equiv="Content-Type" content="text/html; charset=windows-1251">

        <!--<input type="text" style="min-width:50%" onkeydown="this.style.width = ((this.value.length + 1) * 8) + 'px';"> -->


    </p>
    <p>Decryption of the name of the printout
        <br>
        <input type="text" name="Header" value="" style="width:50%" placeholder="Header for this type printouts">

        <!--<input type="text" style="min-width:50%" onkeydown="this.style.width = ((this.value.length + 1) * 8) + 'px';"> -->


    </p>
    <p>Regexep pattern for parsing
        <br>
        <input type="text" name="limiter"
               value=""
               style="min-width:50%; max-width:100%;" onkeydown="this.style.width = ((this.value.length) * 8) + 'px';"
               placeholder="Regular expression for parsing. Example: MO FAULT CODES CLASS 2A \n{2,}" required>
    </p>

    <p>Name of managed object
        <br>
        <input type="text" name="name_key" value="" title="Letters and " placeholder="Managed object. Example {MO NSEI}"
               style="width:50%" required>
    </p>
    <p>Keys for searching
        <br>
        <input type="text" name="keys" value="" style="width:50%"
               pattern="([\d\w]+ ?)+[\d\w]$" placeholder="Insert searching keys if format {key1 key2 key3}" required>
    </p>
    </div>

    <script type="text/javascript">

function generate_bit_map(form, keys,name){


name.disabled = true;
var str = keys.value;


var true_str = str.replace(/\s+/g, ' ');

if (true_str.substring(true_str.length-1,true_str.length) == ' '){
    true_str = true_str.slice(0, -1);
}

var arr = true_str.split(" ");
var i = 0;



for (i = 0; i <arr.length; i++){
var node = document.createTextNode(arr[i]);
var para = document.createElement("p");

var node1 = document.createTextNode("System of calculation for in \xa0\xa0 \xa0 \xa0 \xa0");
var node2 = document.createTextNode("System of calculation for out \xa0 \xa0\xa0 \xa0");
var node3 = document.createTextNode("Direction of calculation \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0");
var node4 = document.createTextNode("Key value indicating no error \xa0 \xa0 \xa0");
var para1 = document.createElement("p");
var para2 = document.createElement("p");
var para3 = document.createElement("p");
var para4 = document.createElement("p");

var btndiv = document.createElement("div");
btndiv.id = arr[i];
document.getElementById("myDiv").appendChild(btndiv);

var in_type = document.createElement('input');
in_type.type = 'text';
in_type.value = ""
in_type.setAttribute("maxlength","4");
in_type.name = 'in_type';

var out_type = document.createElement('input');
out_type.type = 'text';
out_type.value = ""
out_type.setAttribute("maxlength","4");
out_type.name = 'out_type';

var direct = document.createElement('input');
direct.type = 'text';
direct.value = ""
direct.setAttribute("maxlength","4");
direct.name = 'direct';

var norm_val = document.createElement('input');
norm_val.type = 'text';
norm_val.value = ""
norm_val.setAttribute("maxlength","4");
norm_val.name = 'norm_val';

var btnbits = document.createElement('input');
btnbits.type = 'button';
btnbits.value = "Add bit to bit-map";
btnbits.name = arr[i];
btnbits.setAttribute("onclick","append(this.form, this.name)");

btndiv.appendChild(btnbits);
para1.appendChild(node);

para.appendChild(node1);
para.appendChild(out_type);

para2.appendChild(node2);
para2.appendChild(in_type);

para3.appendChild(node3);
para3.appendChild(direct);

para4.appendChild(node4);
para4.appendChild(norm_val);

document.getElementById("myDiv").appendChild(para1).appendChild(btndiv).appendChild(para).appendChild(para2).appendChild(para3).appendChild(para4);


}

}



    </script>

    <script type="text/javascript">
function append(form, name) {
    var btndiv = document.createElement("div");
    btndiv.id = 'divBtn';
    document.getElementById(name).appendChild(btndiv);

    var btn = document.createElement('input');
    btn.type = 'text';
    btn.name = name;
    btn.value = ""
    btn.size = 65;
    btn.setAttribute("placeholder","Insert bit in format {name, value, text}");
    btn.setAttribute("pattern","[a-zA-Z0-9]+ [0-9]{,3} .+");
    btndiv.appendChild(btn);

}

function a(obj) {
if (obj!=undefined) {
obj.disabled=true;
//или можно так
//obj.disabled=(!obj.disabled);
}

}
</script>



    <form id="keys_bits" name="keys_bit">
        <table>
            <div id="myDiv">
                <input type="button" name=button1 value="Generate bit-map for keys"
                       onclick="generate_bit_map(this.form, keys, this.name);this.hidden=true;a(keys)">

            </div>
        </table>
        <p>Keys to print
            <br>
            <input type="text" name="KeysToPrint" style="width:50%" value="" placeholder="By side key that you want to print">
            </br>


            <input type="submit" value="Create xml config" formaction="/cgi-bin/AddXmlConfig.py" formmethod="post">
        </p>
    </form>
</form>
<form>
    <div>

    </div>
    <div>

    </div>
</form>
</body>
</html>